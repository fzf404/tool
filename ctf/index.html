<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <title>fzf404｜CTF</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/x-icon" href="https://img.fzf404.art/favicon.ico" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sedom/dist/sedom.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/sedom/dist/sedom.min.js"></script>
  <script>
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?35a26dead5e790cb29ec1d40fdde8f14";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
</head>

<body>
  <h2>
    夺旗赛 🎉
  </h2>
  <h4>QinLi Studio 2022 CTF 🎁</h4>
  <code>
      docker run -itd -h qlstudio -p 30022:22 fzf404/ctf bash
      ssh ql@localhost -p 30022
      password: qlstudio
  </code>
  <hr />
  <p>
    <button id="flag" class="red">01-flag</button>
    <button id="hide" class="orange">02-hide</button>
    <button id="find" class="yellow">03-find</button>
    <button id="unzip" class="green">04-unzip</button>
  </p>
  <p>
    <button id="access" class="cyan">05-access</button>
    <button id="python" class="indigo">06-python</button>
    <button id="nginx" class="purple">07-nginx</button>
  </p>
  <hr />
  <form class="space">
    <label for="mark">标记</label>
    <input id="mark" type="text" placeholder="请输入标记" />
    <button id="submit" class="blue">提交</button>
  </form>
  <h6>
    <a class="right blue" href="..">返回</a>
  </h6>
  <button class="theme">🌓</button>
  <script>
    // 成绩
    let score = 0
    // 输入框
    const input = document.getElementById('mark')

    // 验证标记
    function verify(flag) {
      fetch('flag/' + flag).then(res => res.json()).then(data => {
        document.getElementById(data).setAttribute('class', 'rainbow')
        localStorage.setItem(data, flag)
        score += 1
        if (score === 7) {
          setInterval(() => {
            Sedom.toggleTheme()
          }, 300)
        }
      }).catch(err => {
        input.setAttribute('placeholder', '标记错误')
      })
    }

    // 读取标记
    function init() {
      localStorage.hasOwnProperty('flag') && verify(localStorage.getItem('flag'))
      localStorage.hasOwnProperty('hide') && verify(localStorage.getItem('hide'))
      localStorage.hasOwnProperty('find') && verify(localStorage.getItem('find'))
      localStorage.hasOwnProperty('unzip') && verify(localStorage.getItem('unzip'))
      localStorage.hasOwnProperty('access') && verify(localStorage.getItem('access'))
      localStorage.hasOwnProperty('python') && verify(localStorage.getItem('python'))
      localStorage.hasOwnProperty('nginx') && verify(localStorage.getItem('nginx'))
    }

    // 提交标记
    document.getElementById('submit').addEventListener('click', (event) => {
      // 阻止默认事件
      event.preventDefault()

      // 获取标记
      const flag = input.value

      // 清空标记
      input.value = ''

      // 验证标记
      if (flag.length === 8) {
        verify(flag)
      } else {
        input.setAttribute('placeholder', '标记应为8位')
      }
    })

    // 初始化
    init()
  </script>
</body>

</html>